<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · Etcd.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/highlightjs/default.css" rel="stylesheet" type="text/css"/><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Etcd.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li class="current"><a class="toctext" href="api.html">API</a><ul class="internal"></ul></li><li><a class="toctext" href="contributing.html">Contributing</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="api.html">API</a></li></ul><a class="edit-page" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/docs/src/api.md#L{line}"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>API</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="API-1" href="#API-1">API</a></h1><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.connect" href="#Etcd.connect"><code>Etcd.connect</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">connect(host=&quot;localhost&quot;, port=2379, version=&quot;v2&quot;)</code></pre><p>Creates an <code>Etcd.Client</code> which can then be used for making requests to an etcd cluster.</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/Etcd.jl#LL17-L21">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.get-Tuple{Etcd.Client,String}" href="#Base.get-Tuple{Etcd.Client,String}"><code>Base.get</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">get(cli, key, sort=false, recursive=false) -&gt; Dict</code></pre><p>Fetches a value from the specified <code>key</code> from the etcd cluster.</p><p>Reference: https://github.com/coreos/etcd/blob/master/Documentation/v2/api.md#get-the-value-of-a-key</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/api/keys.jl#LL5-L11">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.cad-Tuple{Etcd.Client,String}" href="#Etcd.cad-Tuple{Etcd.Client,String}"><code>Etcd.cad</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">cad(cli, key; prev_value=nothing, prev_index=-1) -&gt; Dict</code></pre><p>Performs an atomic compare-and-delete on the <code>key</code> in the etcd cluster.</p><p>Reference: https://github.com/coreos/etcd/blob/master/Documentation/v2/api.md#atomic-compare-and-delete</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/api/keys.jl#LL150-L156">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.cas-Tuple{Etcd.Client,String,String}" href="#Etcd.cas-Tuple{Etcd.Client,String,String}"><code>Etcd.cas</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">cas(cli, key, value; prev_value=nothing, prev_index=-1, ttl=-1) -&gt; Dict</code></pre><p>Performs an atomic compare-and-swap with the <code>key</code> and <code>value</code> on the etcd cluster.</p><p>Reference: https://github.com/coreos/etcd/blob/master/Documentation/v2/api.md#atomic-compare-and-swap</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/api/keys.jl#LL173-L179">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.create-Tuple{Etcd.Client,String,String}" href="#Etcd.create-Tuple{Etcd.Client,String,String}"><code>Etcd.create</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">create(cli, key, value; ttl=-1) -&gt; Dict</code></pre><p>Creates a new key/value pair on the etcd cluster, asserting that the key does not already exist.</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/api/keys.jl#LL72-L76">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.createdir-Tuple{Etcd.Client,String}" href="#Etcd.createdir-Tuple{Etcd.Client,String}"><code>Etcd.createdir</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">createdir(cli, key; ttl=-1) -&gt; Dict</code></pre><p>Creates a new directory on the etcd cluster, asserting that the directory does not already exist.</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/api/keys.jl#LL92-L96">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.delete-Tuple{Etcd.Client,String}" href="#Etcd.delete-Tuple{Etcd.Client,String}"><code>Etcd.delete</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">delete(cli, key) -&gt; Dict</code></pre><p>Removes the <code>key</code> from the etcd cluster.</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/api/keys.jl#LL133-L137">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.deletedir-Tuple{Etcd.Client,String}" href="#Etcd.deletedir-Tuple{Etcd.Client,String}"><code>Etcd.deletedir</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">deletedir(cli, key; recursive=false) -&gt; Dict</code></pre><p>Removes the directory from the etcd cluster.</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/api/keys.jl#LL140-L144">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.exists-Tuple{Etcd.Client,String}" href="#Etcd.exists-Tuple{Etcd.Client,String}"><code>Etcd.exists</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">exists(cli, key) -&gt; Bool</code></pre><p>Returns whether the <code>key</code> exists in the etcd cluster.</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/api/keys.jl#LL112-L116">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.set-Tuple{Etcd.Client,String,String}" href="#Etcd.set-Tuple{Etcd.Client,String,String}"><code>Etcd.set</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">set(cli, key, value; ttl=-1, ordered=false) -&gt; Dict</code></pre><p>Sets the <code>value</code> for the specified <code>key</code> in the etcd cluster.</p><p>Reference: https://github.com/coreos/etcd/blob/master/Documentation/v2/api.md#changing-the-value-of-a-key</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/api/keys.jl#LL43-L49">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.setdir-Tuple{Etcd.Client,String}" href="#Etcd.setdir-Tuple{Etcd.Client,String}"><code>Etcd.setdir</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">setdir(cli, key; ttl=-1) -&gt; Dict</code></pre><p>Creates a directory with the specified <code>key</code> on the etcd cluster.</p><p>Reference: https://github.com/coreos/etcd/blob/master/Documentation/v2/api.md#creating-directories</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/api/keys.jl#LL60-L66">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.update-Tuple{Etcd.Client,String,String}" href="#Etcd.update-Tuple{Etcd.Client,String,String}"><code>Etcd.update</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">update(cli, key, value; ttl=-1) -&gt; Dict</code></pre><p>Updates an existing key with a new value on the etcd cluster, asserting that the key must already exist.</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/api/keys.jl#LL82-L86">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.updatedir-Tuple{Etcd.Client,String}" href="#Etcd.updatedir-Tuple{Etcd.Client,String}"><code>Etcd.updatedir</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">updatedir(cli, key; ttl=-1) -&gt; Dict</code></pre><p>Updates the name of a direcotry on the etcd cluster, asserting that the directory already exists.</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/api/keys.jl#LL102-L106">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.watch-Tuple{Function,Etcd.Client,String}" href="#Etcd.watch-Tuple{Function,Etcd.Client,String}"><code>Etcd.watch</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">watch(f, cli, key; wait_index=-1, recursive=false)</code></pre><p>Creates an asynchronous <code>Task</code> which watches the <code>key</code> on the etcd cluster and runs function <code>f</code> on the response.</p><p>Reference: https://github.com/coreos/etcd/blob/master/Documentation/v2/api.md#waiting-for-a-change</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/api/watch.jl#LL1-L8">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.watchloop" href="#Etcd.watchloop"><code>Etcd.watchloop</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">watchloop(f, cli, key, [p]; wait_index=-1, recursive=false)</code></pre><p>Creates an asynchrous <code>Task</code> which continously watches the <code>key</code> on the etcd cluster and runs function <code>f</code> on the response. The predicate function <code>p</code> represents a termination condition to exit the loop.</p><p>Reference: https://github.com/coreos/etcd/blob/master/Documentation/v2/api.md#waiting-for-a-change</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/api/watch.jl#LL28-L36">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.machines-Tuple{Etcd.Client}" href="#Etcd.machines-Tuple{Etcd.Client}"><code>Etcd.machines</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">machines(cli) -&gt; Array</code></pre><p>Returns an array of machines (socket addresses) in the cluster.</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/api/machines.jl#LL3-L7">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.stats-Tuple{Etcd.Client,String}" href="#Etcd.stats-Tuple{Etcd.Client,String}"><code>Etcd.stats</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">stats(cli, stats_type) -&gt; Dict</code></pre><p>Fetches any stats from the cluster (<code>stats_type</code> may be &quot;store&quot;, &quot;self&quot; or &quot;leader&quot;)</p><p>Reference: https://github.com/coreos/etcd/blob/master/Documentation/v2/api.md#statistics</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/api/stats.jl#LL5-L11">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.leader-Tuple{Etcd.Client}" href="#Etcd.leader-Tuple{Etcd.Client}"><code>Etcd.leader</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">leader(cli) -&gt; Dict</code></pre><p>Fetchers the stats for the leader of the etcd cluster.</p><p>Reference: https://github.com/coreos/etcd/blob/master/Documentation/v2/api.md#leader-statistics</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/api/leaders.jl#LL3-L9">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.members-Tuple{Etcd.Client}" href="#Etcd.members-Tuple{Etcd.Client}"><code>Etcd.members</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">members(cli) -&gt; Dict</code></pre><p>Returns a dict (id, member) of members in the etcd cluster.</p><p>Reference: https://github.com/coreos/etcd/blob/master/Documentation/v2/members_api.md#list-members</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/api/members.jl#LL3-L9">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.request" href="#Etcd.request"><code>Etcd.request</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">request(f, uri, opts; n=5, max_delay=10.0)</code></pre><p>Executes the HTTP request <code>f</code> with the given <code>uri</code> and <code>opts</code> and returns the response body. JSON responses are parsed with <code>Requests.json</code> otherwise a <code>String</code> is returned. For failed HTTP or etcd requests an <code>HTTPError</code> or <code>EtcdError</code> is thrown respectively.</p><p><strong>Arguments</strong></p><ul><li><p><code>f::Function</code>: a valid <code>Requests</code> method (e.g., <code>Requests.get</code>)</p></li><li><p><code>uri::String</code>: the HTTP uri</p></li><li><p><code>opts::Dict</code>: a set of options to be passed to <code>f</code> with the keyword <code>query</code></p></li><li><p><code>n=5</code>: the number of retry attempts for the request</p></li><li><p><code>max_delay=10.0</code>: delay in seconds between each retry attempt</p></li></ul><p><strong>Throws</strong></p><ul><li><p><code>HTTPError</code>: when the HTTP response has a status code &gt;= 400</p></li><li><p><code>EtcdError</code>: when the HTTP response body contains &quot;errorCode&quot; which signifies an etcd error</p></li></ul><p><strong>Returns</strong></p><ul><li><p><code>Dict</code>: for most etcd response (the parsed json HTTP response body)</p></li><li><p><code>Array</code>: some etcd responses return a list vs dict when parse the json HTTP response body</p></li><li><p><code>String</code>: all non-json response bodies</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/requests.jl#LL34-L56">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.HTTPError" href="#Etcd.HTTPError"><code>Etcd.HTTPError</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">HTTPError &lt;: Exception</code></pre><p>Wraps a <code>Requests.Response</code> when the response status is &gt;= 400.</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/requests.jl#LL1-L5">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.EtcdError" href="#Etcd.EtcdError"><code>Etcd.EtcdError</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">EtcdError &lt;: Exception</code></pre><p>Wraps an etcd response <code>Dict</code> when the response contains an <code>&quot;errorCode&quot;</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/requests.jl#LL17-L21">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.install" href="#Etcd.install"><code>Etcd.install</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">install(force=true)</code></pre><p>Downloads and installs a local etcd server (mostly for testing).</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/utils.jl#LL1-L5">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Etcd.start" href="#Etcd.start"><code>Etcd.start</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">start(timeout=-1) -&gt; Future</code></pre><p>Starts up the local etcd server (mostly for testing). The <code>timeout</code> specifies a number of seconds to run the server for (using <code>timeout</code> or <code>gtimeout</code>).</p></div><a class="source-link" target="_blank" href="https://github.com/rofinn/Etcd.jl/blob/f7cf077b8504c42c0d0c8df4a4d6258594182fbc/src/utils.jl#LL22-L28">source</a><br/></section><footer><hr/><a class="previous" href="index.html"><span class="direction">Previous</span><span class="title">Home</span></a><a class="next" href="contributing.html"><span class="direction">Next</span><span class="title">Contributing</span></a></footer></article></body></html>
